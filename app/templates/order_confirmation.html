<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmation - Quality Clamps</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        .confirmation-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .success-header {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 40px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
        }
        .success-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }
        .order-details {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #28a745;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }
        .info-row:last-child {
            border-bottom: none;
        }
        .info-label {
            font-weight: 600;
            color: #495057;
        }
        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }
        .order-item:last-child {
            border-bottom: none;
        }
        .item-details {
            flex: 1;
        }
        .item-name {
            font-weight: 600;
            color: #2c3e50;
        }
        .item-specs {
            font-size: 0.9em;
            color: #6c757d;
            margin-top: 5px;
        }
        .item-quantity {
            margin: 0 20px;
            color: #6c757d;
        }
        .item-price {
            font-weight: 600;
            color: #28a745;
        }
        .order-summary {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }
        .summary-total {
            font-size: 1.3em;
            font-weight: 600;
            color: #28a745;
            border-top: 2px solid #28a745;
            padding-top: 15px;
            margin-top: 15px;
        }
        .next-steps {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
                .continue-shopping {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: 600;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: background-color 0.3s;
        }
        .continue-shopping:hover {
            background: #0056b3;
            text-decoration: none;
            color: white;
        }
        
        /* Payment Information Styles */
        .status-pending {
            color: #ffc107;
            font-weight: 600;
        }
        .status-completed {
            color: #28a745;
            font-weight: 600;
        }
        .status-failed {
            color: #dc3545;
            font-weight: 600;
        }
        .payment-instructions {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #17a2b8;
        }
        .payment-instructions h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        .instructions-content {
            color: #495057;
            line-height: 1.6;
        }
        .status-failed {
            color: #dc3545;
            font-weight: 600;
        }
        .payment-instructions {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #28a745;
        }
        .payment-instructions h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 1em;
        }
        .instructions-content {
            color: #495057;
            line-height: 1.5;
        }
        .instructions-content p {
            margin: 8px 0;
        }
        .print-order {
            background: #6c757d;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: 600;
            border-radius: 8px;
            margin-right: 15px;
            cursor: pointer;
        }
        .print-order:hover {
            background: #5a6268;
        }
    </style>
</head>
<body>
    {% include 'navbar.html' %}
    
    <div class="confirmation-container">
        <div class="success-header">
            <div class="success-icon">‚úÖ</div>
            <h1>Order Placed Successfully!</h1>
            <p>Thank you for your order. We'll process it shortly.</p>
            <h3>Order #{{ order.order_id }}</h3>
        </div>
        
        <!-- Customer Information -->
        <div class="order-details">
            <h3 class="section-title">üë§ Customer Information</h3>
            <div class="info-row">
                <span class="info-label">Name:</span>
                <span>{{ order.customer_info.name }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Email:</span>
                <span>{{ order.customer_info.email }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Phone:</span>
                <span>{{ order.customer_info.phone }}</span>
            </div>
            {% if order.customer_info.company %}
            <div class="info-row">
                <span class="info-label">Company:</span>
                <span>{{ order.customer_info.company }}</span>
            </div>
            {% endif %}
        </div>
        
        <!-- Shipping Information -->
        <div class="order-details">
            <h3 class="section-title">üöö Shipping Information</h3>
            <div class="info-row">
                <span class="info-label">Address:</span>
                <span>{{ order.customer_info.address }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">City:</span>
                <span>{{ order.customer_info.city }}</span>
            </div>
            {% if order.customer_info.state %}
            <div class="info-row">
                <span class="info-label">State:</span>
                <span>{{ order.customer_info.state }}</span>
            </div>
            {% endif %}
            <div class="info-row">
                <span class="info-label">Country:</span>
                <span>{{ order.customer_info.country }}</span>
            </div>
            {% if order.customer_info.postal_code %}
            <div class="info-row">
                <span class="info-label">Postal Code:</span>
                <span>{{ order.customer_info.postal_code }}</span>
            </div>
            {% endif %}
            <div class="info-row">
                <span class="info-label">Shipping Method:</span>
                <span>
                    {% if order.customer_info.shipping_method == 'sea' %}
                        üö¢ Sea Shipping (15-25 business days)
                    {% else %}
                        ‚úàÔ∏è Air Shipping (5-7 business days)
                    {% endif %}
                </span>
            </div>
        </div>
        
        <!-- Payment Information -->
        <div class="order-details">
            <h3 class="section-title">üí≥ Payment Information</h3>
            <div class="info-row">
                <span class="info-label">Payment Method:</span>
                <span>
                    {% if order.payment_info.method == 'cod' %}
                        üíµ Cash on Delivery (COD)
                    {% elif order.payment_info.method == 'paypal' %}
                        üíô PayPal
                    {% elif order.payment_info.method == 'upi' %}
                        üì± UPI Payment
                    {% else %}
                        {{ order.payment_info.method|title }}
                    {% endif %}
                </span>
            </div>
            
            {% if order.payment_info.status %}
            <div class="info-row">
                <span class="info-label">Payment Status:</span>
                <span class="status-{{ order.payment_info.status|lower }}">
                    {{ order.payment_info.status|title }}
                </span>
            </div>
            {% endif %}
            
            {% if order.payment_info.transaction_id %}
            <div class="info-row">
                <span class="info-label">Transaction ID:</span>
                <span style="font-family: monospace; color: #007bff;">
                    {{ order.payment_info.transaction_id }}
                </span>
            </div>
            {% endif %}
            
            {% if order.payment_info.amount %}
            <div class="info-row">
                <span class="info-label">Amount Paid:</span>
                <span style="color: #28a745; font-weight: 600;">
                    ‚Çπ{{ "%.2f"|format(order.payment_info.amount) }}
                </span>
            </div>
            {% endif %}
            
            {% if order.payment_info.instructions %}
            <div class="payment-instructions">
                <h4>Payment Instructions:</h4>
                <div class="instructions-content">
                    {{ order.payment_info.instructions|safe }}
                </div>
            </div>
            {% endif %}
        </div>
        
        <!-- Order Items -->
        <div class="order-details">
            <h3 class="section-title">üì¶ Order Items</h3>
            
            {% for item in order.order_items %}
            <div class="order-item">
                <div class="item-details">
                    <div class="item-name">{{ item.product.name }}</div>
                    {% if item.specifications %}
                    <div class="item-specs">
                        {% for spec_category, spec_option in item.specifications.items() %}
                            {{ spec_category }}: {{ spec_option }}{% if not loop.last %}<br>{% endif %}
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                <div class="item-quantity">√ó{{ item.quantity }}</div>
                <div class="item-price">${{ "%.2f"|format(item.final_total) }}</div>
            </div>
            {% endfor %}
            
            <div class="order-summary">
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span>${{ "%.2f"|format(order.subtotal) }}</span>
                </div>
                <div class="summary-row">
                    <span>Total Weight:</span>
                    <span>{{ "%.2f"|format(order.total_weight) }} kg</span>
                </div>
                <div class="summary-row">
                    <span>Shipping ({{ order.customer_info.shipping_method|title }}):</span>
                    <span>${{ "%.2f"|format(order.shipping_cost) }}</span>
                </div>
                <div class="summary-row summary-total">
                    <span>Total:</span>
                    <span>${{ "%.2f"|format(order.total) }}</span>
                </div>
            </div>
        </div>
        
        <!-- Additional Notes -->
        {% if order.customer_info.notes %}
        <div class="order-details">
            <h3 class="section-title">üìù Additional Notes</h3>
            <p>{{ order.customer_info.notes }}</p>
        </div>
        {% endif %}
        
        <!-- Next Steps -->
        <div class="next-steps">
            <h4 style="color: #1976d2; margin-bottom: 15px;">üìã What happens next?</h4>
            <ul style="margin-bottom: 0;">
                <li><strong>Order Processing:</strong> We'll review and process your order within 24 hours</li>
                <li><strong>Confirmation:</strong> You'll receive an email confirmation with tracking details</li>
                <li><strong>Production:</strong> Your items will be prepared and packaged</li>
                <li><strong>Shipping:</strong> Your order will be shipped via {{ order.customer_info.shipping_method|title }} shipping</li>
                <li><strong>Delivery:</strong> 
                    {% if order.customer_info.shipping_method == 'sea' %}
                        Estimated delivery in 15-25 business days
                    {% else %}
                        Estimated delivery in 5-7 business days
                    {% endif %}
                </li>
            </ul>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button onclick="window.print()" class="print-order">üñ®Ô∏è Print Order</button>
            <a href="{{ url_for('index') }}" class="continue-shopping">üõçÔ∏è Continue Shopping</a>
        </div>
        
        <div style="text-align: center; margin-top: 20px; color: #6c757d;">
            <p><strong>Need help?</strong> Contact us at <a href="{{ url_for('contact') }}">our contact page</a></p>
            <small>Order placed on {{ order.created_date }}</small>
        </div>
    </div>
    
    {% include 'footer.html' %}
</body>
</html>
